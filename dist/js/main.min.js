const visitContainer=document.querySelector(".visits-list");class CreateVisitModal{constructor(){this.modal=document.createElement("div"),this.modal.classList.add("creadeVisitModal"),this.modal.innerHTML='\n        <div class="modal-content">\n            <label for="doctorSelect">Оберіть лікаря:</label>\n            <select id="doctorSelect">\n                <option value="" disabled selected hidden>Оберіть лікаря</option>\n                <option value="cardiologist">Кардіолог</option>\n                <option value="dentist">Стоматолог</option>\n                <option value="therapist">Терапевт</option>\n            </select>\n            <div id="fieldsContainer"></div>\n        </div>\n        ',document.body.appendChild(this.modal),this.selectElement=document.getElementById("doctorSelect"),this.fieldsContainer=document.getElementById("fieldsContainer"),this.selectElement.addEventListener("change",this.handleDoctorChange.bind(this))}handleDoctorChange(){const e=this.selectElement.value;this.updateAdditionalFields(e)}updateAdditionalFields(e){this.fieldsContainer.innerHTML="",this.createInputField("purpose","Мета візиту"),this.createInputField("description","Короткий опис візиту"),this.createSelectField("urgency","Терміновість",["Звичайна","Пріоритетна","Невідкладна"],"оберіть терміновість"),this.createInputField("fullName","ПІБ"),"cardiologist"===e?(this.createInputField("pressure","Звичайний тиск:"),this.createInputField("bmi","Індекс маси тіла:"),this.createInputField("heartDiseases","Перенесені захворювання серцево-судинної системи:"),this.createInputField("age","Вік:")):"dentist"===e?this.createInputField("lastVisitDate","Дата останнього відвідування:"):"therapist"===e&&this.createInputField("age","Вік:");const t=document.createElement("button");t.innerText="Створити",t.addEventListener("click",()=>this.createVisit()),this.fieldsContainer.appendChild(t);const i=document.createElement("button");i.innerText="Закрити",i.addEventListener("click",()=>this.closeVisitModal()),this.fieldsContainer.appendChild(i)}closeVisitModal(){this.modal.remove()}createVisit(){const e=this.fieldsContainer.querySelectorAll(".modalInput"),t={};t.selectedDoctor=t.selectedDoctor=this.selectElement.options[this.selectElement.selectedIndex].text,e.forEach(e=>{const i=e.id,n="select-one"===e.type?e.options[e.selectedIndex].value:e.value;t[i]=n}),this.visit=t,console.log(createVisit.visit),this.closeVisitModal()}createInputField(e,t){const i=document.createElement("div");i.innerHTML=`\n            <label for="${e}">${t}</label>\n            <input type="text" id="${e}" name="${e}" class="modalInput">\n        `,this.fieldsContainer.appendChild(i)}createSelectField(e,t,i){const n=document.createElement("div"),s=i.map(e=>`<option value="${e}">${e}</option>`).join("");n.innerHTML=`\n            <label for="${e}">${t}</label>\n            <select id="${e}" name="${e}" class="modalInput">\n                <option value="" disabled selected hidden>Оберіть ${t.toLowerCase()}</option>\n                ${s}\n            </select>\n        `,this.fieldsContainer.appendChild(n)}}const createVisit=new CreateVisitModal;class VisitCard{constructor(e){this.visitData=e,this.isExpanded=!1,this.isEditing=!1,this.createCardElement(),this.render()}createCardElement(){this.cardElement=document.createElement("div"),this.cardElement.classList.add("visitCard"),this.cardElement.innerHTML=`\n            <div class="visibleInfo">\n                <p>ПІБ: ${this.visitData.fullName}</p>\n                <p>Лікар: ${this.visitData.doctorName}</p>\n            </div>\n            <div class="additionalInfoContainer"></div>\n            <button class="showMoreBtn">Показати більше</button>\n            <button class="editBtn">Редагувати</button>\n            <button class="saveChangesBtn" style="display: none;">Зберегти зміни</button>\n            <span class="deleteIcon">❌</span>\n        `,this.cardElement.querySelector(".showMoreBtn").addEventListener("click",()=>this.toggleExpanded()),this.cardElement.querySelector(".editBtn").addEventListener("click",()=>this.toggleEditing()),this.cardElement.querySelector(".saveChangesBtn").addEventListener("click",()=>this.saveChanges()),this.cardElement.querySelector(".deleteIcon").addEventListener("click",()=>this.deleteCard())}updateShowMoreButtonOnEditing(){const e=this.cardElement.querySelector(".showMoreBtn");e&&(e.disabled=this.isEditing)}render(){const e=this.cardElement.querySelector(".additionalInfoContainer");e.innerHTML="",this.isExpanded&&!this.isEditing&&Object.keys(this.visitData).forEach(t=>{const i=translations[t]||t;"urgency"!==t||this.isEditing?"doctorName"!==t&&(e.innerHTML+=`<p>${i}: ${this.visitData[t]}</p>`):e.innerHTML+=`\n                        <p>${i}: ${this.visitData[t]}</p>\n                    `}),document.querySelector(".visits-list").appendChild(this.cardElement);const t=this.cardElement.querySelector(".showMoreBtn");t.disabled=this.isEditing,t.innerText=this.isExpanded?"Приховати":"Показати більше"}toggleExpanded(){this.isExpanded=!this.isExpanded,this.render()}toggleEditing(){this.isEditing=!this.isEditing,this.isEditing?(this.displayEditForm(),this.cardElement.querySelector(".showMoreBtn").disabled=!0):(this.saveChanges(),this.hideEditForm(),this.cardElement.querySelector(".showMoreBtn").disabled=!1),this.render(),this.updateShowMoreButtonOnEditing()}displayEditForm(e){const t=this.cardElement.querySelector(".additionalInfoContainer");this.cardElement.querySelector(".visibleInfo").style.display="none",t.style.display="block",this.visitData=e,this.renderEditForm()}hideEditForm(){const e=this.cardElement.querySelector(".additionalInfoContainer"),t=this.cardElement.querySelector(".visibleInfo");e.style.display="none",t.style.display="block",this.cardElement.querySelector(".editBtn").style.display="inline-block",this.cardElement.querySelector(".saveChangesBtn").style.display="none",this.isExpanded&&(e.style.display="block"),this.render(),this.updateShowMoreButtonOnEditing()}renderEditForm(){const e=this.cardElement.querySelector(".additionalInfoContainer");e.innerHTML='<div class="editForm">',Object.keys(this.visitData).forEach(t=>{if("doctorName"!==t){const i=translations[t]||t;e.innerHTML+="urgency"===t?`\n                        <div>\n                            <label for="edited${t}">${i}:</label>\n                            <select id="edited${t}">\n                                ${urgencyOptions.map(e=>`<option value="${e}" ${this.visitData[t]===e?"selected":""}>${e}</option>`).join("")}\n                            </select>\n                        </div>\n                    `:`\n                        <div>\n                            <label for="edited${t}">${i}:</label>\n                            <input type="text" id="edited${t}" value="${this.visitData[t]}">\n                        </div>\n                    `}}),e.innerHTML+="</div>",this.cardElement.querySelector(".editBtn").style.display="none",this.cardElement.querySelector(".saveChangesBtn").style.display="inline-block",this.cardElement.querySelector(".saveChangesBtn").addEventListener("click",()=>this.saveChanges())}updateVisitData(){const e=this.cardElement.querySelector(".additionalInfoContainer");Object.keys(this.visitData).forEach(e=>{"doctorName"!==e&&(this.visitData[e]=document.getElementById("edited"+e).value)}),e.innerHTML="",Object.keys(this.visitData).forEach(t=>{e.innerHTML+=`<p>${t}: ${this.visitData[t]}</p>`}),this.render()}saveChanges(){this.updateVisitData(),this.updateShowMoreButtonOnEditing(),this.render()}deleteCard(){this.cardElement.remove()}}class VisitCardManager{constructor(){this.visitsList=document.querySelector(".visits-list")}addVisitCard(e){const t=new VisitCard(e);this.visitsList.appendChild(t.cardElement),t.cardElement.querySelector(".editBtn").addEventListener("click",()=>t.displayEditForm(e))}}const visitCardManager=new VisitCardManager,translations={doctorName:"Лікар",purpose:"Мета",description:"Опис",urgency:"Терміновість",fullName:"ПІБ",bloodPressure:"Тиск",bmi:"ІМТ",cardiovascularDiseases:"Кардіоваскулярні захворювання",age:"Вік",lastVisitDate:"Дата останнього візиту"},urgencyOptions=["Висока","Середня","Низька"],visitsData=[{doctorName:"Доктор Іванова",purpose:"Регулярний огляд",description:"Аналіз крові та артеріального тиску",urgency:"Пріоритетна",fullName:"Петренко Іван Петрович",bloodPressure:"120/80",bmi:24.5,cardiovascularDiseases:"Немає",age:35,lastVisitDate:"2023-01-09"}];visitsData.forEach(e=>{visitCardManager.addVisitCard(e)});
//# sourceMappingURL=../sourcemaps/main.min.js.map
